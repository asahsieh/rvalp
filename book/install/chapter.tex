\chapter{Installing a RISC-V Toolchain}
\label{chapter:install}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{The GNU Toolchain}

Discuss the GNU toolchain elements used to experiment with the 
material in this book.

\enote{It would be good to find some Mac and Windows users to write 
and test proper variations on this section to address those systems.
Pull requests, welcome!}%
The instructions and examples here were all implemented on Ubuntu 16.04 LTS. 

Install custom code in a location that will not cause interference with
other applications and allow for easy cleanup.  These instructions 
install the toolchain in \verb@/usr/local/riscv@.  At any time
you can remove the lot and start over by executing the following 
command:

\begin{verbatim}
rm -rf /usr/local/riscv/*
\end{verbatim}


Tested on Ubuntu 16.04 LTS.   
18.04 was just released\ldots\ update accordingly.

These are the only commands that you should perform as root when installing
the toolchain:

\begin{verbatim}
sudo apt-get install autoconf automake autotools-dev curl libmpc-dev \
	libmpfr-dev libgmp-dev gawk build-essential bison flex texinfo gperf \
	libtool patchutils bc zlib1g-dev libexpat-dev
sudo mkdir -p /usr/local/riscv/
sudo chmod 777 /usr/local/riscv/ 
\end{verbatim}

All other commands should be executed as a regular user.  This will eliminate the
possibility of clobbering system files that should not be touched when tinkering with
the toolchain applicaitons.

To download, compile and ``install'' the toolchain:

\begin{verbatim}
# riscv toolchain:
# 
# https://riscv.org/software-tools/risc-v-gnu-compiler-toolchain/

git clone --recursive https://github.com/riscv/riscv-gnu-toolchain
cd riscv-gnu-toolchain
./configure --prefix=/usr/local/riscv/rv32i --with-arch=rv32i --with-abi=ilp32
make
make install
\end{verbatim}

Need to discuss augmenting the PATH environment variable.

Discuss the choice of ilp32 as well as what the other variations would do.

Discuss rv32im and note that the details are found in \autoref{chapter:RV32}.


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{rvddt}

Disciuss installing the rvddt simulator here.
